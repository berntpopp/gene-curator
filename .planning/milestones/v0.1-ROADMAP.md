# Milestone v0.1: Dynamic Forms

**Status:** SHIPPED 2026-01-23
**Phases:** 1-5
**Total Plans:** 12

## Overview

This milestone transformed the Gene Curator frontend from hardcoded ClinGen forms to schema-driven dynamic forms. The journey started with completing DynamicField rendering, added tab/section structure and field metadata, wired validation and scoring, and culminated with removing the ClinGen bypass and refactoring existing form views. Each phase built on the previous, with highest-risk integration work (bypass removal, precuration refactor) deferred until dynamic forms were proven working.

## Phases

### Phase 1: Field Rendering

**Goal**: DynamicField renders any field type defined in schema field_definitions, including nested structures and specialized components
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:
- [x] 01-01: Create component registry and enhance DynamicField with registry integration, depth tracking, nested styling
- [x] 01-02: Add test coverage for componentRegistry and DynamicField enhancements

**Details:**
- Component registry with 5 specialized evidence components (MONDOAutocomplete, PMIDInput, HPOInheritanceSelect, OMIMAutocomplete, HPOInput)
- DynamicField enhanced with customComponent computed, depth tracking (MAX_DEPTH=10), progressive background tinting
- Fallback emit pattern for missing components

### Phase 2: Tab Structure

**Goal**: DynamicForm organizes fields into tabs and sections based on schema ui_configuration
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01: Create TabContent component and enhance DynamicForm with v-tabs/v-window navigation and fallback
- [x] 02-02: Add score badges to tabs and comprehensive test coverage for tab structure

**Details:**
- v-tabs/v-window pattern with lazy rendering and KeepAlive state preservation
- v-expansion-panels for collapsible sections
- Backward-compatible flat rendering fallback for schemas without ui_configuration
- Field path resolution for nested schema access

### Phase 3: Field Metadata

**Goal**: DynamicField displays rich metadata (icons, hints, tooltips, help links) from field_definitions
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 03-01: Add metadata computed properties and slots to DynamicField (icon, hint, tooltip, helpUrl)
- [x] 03-02: Add test coverage for field metadata features

**Details:**
- Metadata slots for all field types (string, textarea, select, number, date, boolean)
- 100-char hint truncation with show more/less toggle
- WCAG-compliant icons (grey-darken-1) and 250ms tooltip delay
- Help URL opens with security flags (noopener,noreferrer)

### Phase 4: Validation

**Goal**: DynamicForm enforces schema validation rules with inline error display
**Depends on**: Phase 1, Phase 2
**Plans**: 2 plans

Plans:
- [x] 04-01: Create useValidationRules composable and integrate into DynamicField for client-side validation
- [x] 04-02: Wire backend errors to fields, add tab error badges, implement form submission blocking

**Details:**
- useValidationRules composable with 7 rule types (required, minLength, maxLength, minimum, maximum, pattern, enum)
- Schema-defined errorMessage override for methodology-specific messages
- Backend validation errors display inline on affected fields
- Tab error badges show validation state at tab level

### Phase 5: Scoring and Integration

**Goal**: DynamicForm displays live scores and replaces hardcoded form views
**Depends on**: Phase 4
**Plans**: 4 plans

Plans:
- [x] 05-01: Create ScoreDisplay component and integrate live scoring into DynamicForm sidebar
- [x] 05-02: Remove ClinGen bypass from SchemaDrivenCurationForm using feature flag transition
- [x] 05-03: Migrate PrecurationFormView to use DynamicForm-based rendering
- [x] 05-04: Add comprehensive test coverage for scoring and integration features

**Details:**
- Schema-agnostic scoring (no hardcoded engine checks, all derived from scoring_configuration)
- Sticky sidebar on lg+ (1280px), static on mobile
- Feature flag (use_dynamic_form) at schema level for gradual rollout
- Evidence data migration utility for legacy ClinGen format
- PrecurationFormView reduced from ~800 to ~300 lines

---

## Milestone Summary

**Key Decisions:**

- Explicit prop mapping for custom components instead of v-bind spread
- Index-based expansion panel values for simplicity
- Minimum 2 valid tabs required to avoid single-tab layout
- 100-char hint truncation threshold with toggle
- Show first error only (Vuetify native behavior)
- Feature flag at schema level for gradual rollout
- Auto-migration on load for legacy data (non-destructive)
- Schema-agnostic scoring design

**Issues Resolved:**

- Frontend hardcoding eliminated - all forms now schema-driven
- ClinGen bypass removed - unified code path for all schemas
- Precuration forms integrated - PrecurationFormView uses DynamicForm

**Issues Deferred:**

- Conditional visibility (COND-01, COND-02) - deferred to v0.2
- Cross-field validation (XVAL-01, XVAL-02) - deferred to v0.2
- Field dependencies (DEPS-01, DEPS-02) - deferred to v0.2
- Pre-existing lint error in CurationDetailView.vue (unused authStore) - not blocking

**Technical Debt Incurred:**

- Manual testing required for production deployment (6 scenarios documented in audit)
- Pre-production checklist items need completion before rollout

---

_For current project status, see .planning/PROJECT.md_
_Archived: 2026-01-23_
